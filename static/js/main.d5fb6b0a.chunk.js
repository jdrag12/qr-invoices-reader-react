(this.webpackJsonprefundapp=this.webpackJsonprefundapp||[]).push([[0],{19:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},35:function(e,n,t){},41:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),s=t(21),i=t.n(s),a=(t(30),t(24)),o=t(7),j=(t(19),t(9)),d=t.p+"static/media/logo.eb717ff9.svg",l=(t(31),t(0)),b=function(e){var n=e.children;return Object(l.jsxs)("nav",{children:[Object(l.jsx)("span",{children:Object(l.jsx)("img",{src:d,height:"55",alt:"logo of the page"})}),Object(l.jsx)("div",{children:n})]})},u=(t(33),function(e){var n=e.children;return Object(l.jsx)("div",{className:"badge",children:n})}),h=(t(34),function(e){var n=e.invoice,t=n.sender,c=n.invoice_no,r=n.description,s=n.amount,i=n.refunded,a=n.refunded_amount,o=n.refunded_percentage,j=n.registration_date;return Object(l.jsxs)("div",{className:"card__container ".concat(i&&"card__container--secondary"," "),children:[Object(l.jsxs)("div",{className:"card__header",children:[Object(l.jsxs)("h2",{children:["Invoice n\xba",c]}),i&&Object(l.jsx)(u,{children:"Refunded"})]}),Object(l.jsxs)("ul",{children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:"Registration date:"})," ",Object(l.jsx)("span",{children:j.toLocaleDateString("en-NL")})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:"Sender:"})," ",Object(l.jsx)("span",{children:t})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:"Description:"})," ",Object(l.jsx)("span",{children:r})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:"Amount:"})," ",Object(l.jsxs)("span",{children:[s,"\u20ac"]})]}),i&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:"Refunded amount:"})," ",Object(l.jsxs)("span",{children:[a,"\u20ac"]})]}),Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:"Refunded percentage:"})," ",Object(l.jsxs)("span",{children:[o,"%"]})]})]})]})]})}),O=(t(35),function(e){var n=e.invoices;return n&&n.length>0?Object(l.jsx)("div",{className:"list__container","data-testid":"list-container",children:n.map((function(e){return Object(l.jsx)(h,{invoice:e},e.invoice_no)}))}):Object(l.jsx)("div",{children:"There is no invoice registered yet"})}),x=function(e){var n=e.invoices;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(b,{children:[Object(l.jsx)("a",{href:"https://duckduckgo.com/?q=qr+code+%22%7B%22sender%22%3A+%22IKEA+BV%22%2C+%22invoice_no%22%3A+%222020000042%22%2C+%22description%22%3A+%22Kallax%22%2C+%22amount%22%3A+59.95%2C+%22vat%22%3A+%5B+%7B+%22rate%22%3A+21%2C+%22amount%22%3A+10.4+%7D+%5D+%7D%22&ia=answer",target:"blank",rel:"nofollow",children:"QR Invoice example"}),Object(l.jsx)(j.b,{to:"/add-invoice",children:"Add Invoice"})]}),Object(l.jsxs)("section",{className:"body__container",children:[Object(l.jsx)("h1",{children:"Registered Invoices"}),Object(l.jsx)(O,{invoices:n})]})]})},f=t(14),v=t(8),p=t(2),m=t(25),g=(t(41),function(e){var n=e.role,t=e.children,c=Object(m.a)(e,["role","children"]);return Object(l.jsx)("button",Object(v.a)(Object(v.a)({},c),{},{className:"button ".concat("primary"===n&&"button--primary"," ").concat("secondary"===n&&"button--secondary"," "),children:t}))});g.defaultProps={role:"primary"};var w=g,A=function(e){var n=e.handleAnswers,t=e.answers;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{children:"Would you like to refund this invoice?"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"radio",id:"firstAnswerYes",name:"firstAnswer",value:"yes",checked:"yes"===t.firstAnswer,onChange:n}),Object(l.jsx)("label",{htmlFor:"firstAnswerYes",children:"Yes"}),Object(l.jsx)("input",{type:"radio",id:"firstAnswerNo",name:"firstAnswer",value:"no",checked:"no"===t.firstAnswer,onChange:n}),Object(l.jsx)("label",{htmlFor:"firstAnswerNo",children:"No"})]})]})},_=function(e){var n=e.answers,t=e.handleAnswers;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{children:"What percentage of the invoice amount should be refunded?"}),Object(l.jsx)("input",{type:"number",id:"secondAnswer",name:"secondAnswer",onChange:t,value:n.secondAnswer,min:"1",max:"100",step:"1"}),Object(l.jsx)("label",{htmlFor:"secondAnswer",children:"%"})]})},y=function(e){var n=e.handleAnswers,t=e.answers;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(A,{handleAnswers:n,answers:t}),"yes"===t.firstAnswer&&Object(l.jsx)(_,{handleAnswers:n,answers:t})]})},N=function(e){var n=e.invoiceData,t=n.invoice,r=n.addInvoiceToRegisterList,s=e.controls,i=Object(p.f)(),a=Object(c.useState)(t),j=Object(o.a)(a,2),d=j[0],b=j[1],u=Object(c.useState)({firstAnswer:"",secondAnswer:1}),h=Object(o.a)(u,2),O=h[0],x=h[1],m=d.sender,g=d.invoice_no,A=s.prevStep;Object(c.useEffect)((function(){if("no"===O.firstAnswer)b(Object(v.a)(Object(v.a)({},d),{},{refunded_percentage:null,refunded_amount:null,registration_date:new Date,refunded:!1}));else if("yes"===O.firstAnswer){var e=O.secondAnswer;b(Object(v.a)(Object(v.a)({},d),{},{registration_date:new Date,refunded:!0,refunded_percentage:Number(e),refunded_amount:Math.round(e/100*d.amount+d.vat[0].amount)}))}}),[O]);return t&&Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[" ","Invoice no: ",Object(l.jsx)("strong",{children:g}),", from ",m," scanned"]}),Object(l.jsx)(y,{answers:O,handleAnswers:function(e){x(Object(v.a)(Object(v.a)({},O),{},Object(f.a)({},e.target.name,e.target.value)))}}),Object(l.jsxs)("div",{className:"button__container",children:[Object(l.jsx)(w,{role:"secondary",onClick:function(){return A()},children:"Scan again"}),Object(l.jsx)(w,{role:"primary",onClick:function(){return r(d),void i.push("/")},disabled:!O.firstAnswer,children:"Submit Invoice"})]})]})})},S=t(23),I=(t(42),function(e){var n=e.controls,t=e.invoiceData,r=n.nextStep,s=Object(c.useState)(!0),i=Object(o.a)(s,2),a=i[0],j=i[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),u=b[0],h=b[1];Object(c.useEffect)((function(){u&&setTimeout((function(){return h("")}),3500)}),[u]);var O=function(e){(0,t.uploadInvoice)(e),r()},x=function(e){h(e),j(!1)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Please, scan a QR code of an invoice"}),Object(l.jsx)("div",{className:"video__container ",children:a&&Object(l.jsx)("div",{className:"roll-in",children:Object(l.jsx)(S.a,{delay:"false",onError:x,onScan:function(e){if(console.log(e),e){var n=function(e){try{return JSON.parse(e)}catch(u){return!1}}(e.text);if(!("object"===typeof(t=n)&&["sender","invoice_no","description","amount","vat"].every((function(e){return t.hasOwnProperty(e)}))))return void x("You have to scan a QR code of an invoice");O(n)}var t}})})}),Object(l.jsx)("div",{className:"button__container",children:Object(l.jsx)(w,{onClick:function(){h(""),j(!a)},role:"primary",children:a?"Switch camera OFF":"Switch camera ON"})}),u&&Object(l.jsx)("span",{className:"error",children:u})]})}),D=(t(43),function(e){var n=e.step,t=e.controls,c=e.invoiceData;switch(n){case 1:return Object(l.jsx)(I,{controls:t,invoiceData:c});case 2:return Object(l.jsx)(N,{controls:t,invoiceData:c})}}),F=function(e){var n=e.addInvoiceToRegisterList,t=Object(c.useState)(null),r=Object(o.a)(t,2),s=r[0],i=r[1],a=Object(c.useState)(1),d=Object(o.a)(a,2),b=d[0],u=d[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("header",{children:Object(l.jsx)(j.b,{to:"/",children:Object(l.jsx)("div",{className:"arrow__container",children:Object(l.jsx)("span",{children:"\u2190"})})})}),Object(l.jsx)("section",{className:"body__container body__container--tight",children:Object(l.jsx)(D,{step:b,controls:{prevStep:function(){return u(b-1)},nextStep:function(){return u(b+1)}},invoiceData:{invoice:s,uploadInvoice:i,addInvoiceToRegisterList:n}})})]})},R=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1];return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(j.a,{children:Object(l.jsxs)(p.c,{children:[Object(l.jsx)(p.a,{path:"/",exact:!0,children:Object(l.jsx)(x,{invoices:t})}),Object(l.jsx)(p.a,{path:"/add-invoice",exact:!0,children:Object(l.jsx)(F,{addInvoiceToRegisterList:function(e){r([].concat(Object(a.a)(t),[e]))}})})]})})})};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(R,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d5fb6b0a.chunk.js.map